---
title: Überprüfen der Integrität der Sicherung mithilfe des Tools "Eseutil" in Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: b0d325ba-4482-4ca2-9a69-c890f985b206
description: Erfahren Sie, wie Sie mithilfe des Befehlszeilentools Eseutil eine Sicherung der Exchange-Informationsspeicher überprüfen.
ms.openlocfilehash: e8f1a46e2d94729ae5586861317312e277216d63
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/03/2020
ms.locfileid: "44452797"
---
#  <a name="validate-backup-integrity-by-using-the-eseutil-tool-in-exchange-2013"></a><span data-ttu-id="4e73d-103">Überprüfen der Integrität der Sicherung mithilfe des Tools "Eseutil" in Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="4e73d-103">Validate backup integrity by using the Eseutil tool in Exchange 2013</span></span>

<span data-ttu-id="4e73d-104">Erfahren Sie, wie Sie mithilfe des Befehlszeilentools Eseutil eine Sicherung der Exchange-Informationsspeicher überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4e73d-104">Find out how to use the Eseutil command-line tool to validate a backup of the Exchange store.</span></span> 
  
<span data-ttu-id="4e73d-105">**Gilt für:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="4e73d-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="4e73d-106">Da der Volumeschattenkopie-Dienst (Volume Shadow Copy Service, VSS) Sicherungen erstellen kann, während Exchange weiterhin in die Datenbank schreibt, berührt der Server nicht alle Seiten und führt die erforderlichen Konsistenzprüfungen aus.</span><span class="sxs-lookup"><span data-stu-id="4e73d-106">Because the Volume Shadow Copy Service (VSS) can create backups while Exchange continues to write to the database, the server does not touch all the pages and perform the necessary consistency checks.</span></span> <span data-ttu-id="4e73d-107">Aus diesem Grund muss jede Sicherungs-und Wiederherstellungsanwendung, die VSS verwendet, die Momentaufnahme Konsistenz überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4e73d-107">For this reason, any backup and restore application that uses VSS must verify snapshot consistency.</span></span> <span data-ttu-id="4e73d-108">Exchange Server 2013 unterstützt die folgenden beiden Methoden zum Überprüfen der Momentaufnahme Konsistenz:</span><span class="sxs-lookup"><span data-stu-id="4e73d-108">Exchange Server 2013 supports the following two methods for checking snapshot consistency:</span></span> 
  
- <span data-ttu-id="4e73d-109">Die CHKSGFILES-API</span><span class="sxs-lookup"><span data-stu-id="4e73d-109">The CHKSGFILES API</span></span>
    
- <span data-ttu-id="4e73d-110">Das Befehlszeilentool "Eseutil"</span><span class="sxs-lookup"><span data-stu-id="4e73d-110">The Eseutil command-line tool</span></span>
    
<span data-ttu-id="4e73d-111">Es wird empfohlen, die CHKSGFILES-API zu verwenden, da es für die Sicherungsanwendung einfacher ist, Fehler zu erkennen, zu diagnostizieren und zu melden, die während der CHKSGFILES-Konsistenzprüfung gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="4e73d-111">We recommend that you use the CHKSGFILES API because it is easier for the backup application to detect, diagnose, and report errors that are found during the CHKSGFILES consistency check.</span></span> <span data-ttu-id="4e73d-112">Informationen zur Verwendung der CHKSGFILES-API finden Sie unter [Überprüfen der Integrität von Sicherungen mithilfe der CHKSGFILES-API in Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="4e73d-112">For information about how to use the CHKSGFILES API, see [Validate backup integrity by using the CHKSGFILES API in Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span></span>
  
## <a name="running-the-eseutil-tool"></a><span data-ttu-id="4e73d-113">Ausführung des Tools "Eseutil"</span><span class="sxs-lookup"><span data-stu-id="4e73d-113">Running the Eseutil tool</span></span>

<span data-ttu-id="4e73d-114">Um die Snapshot-Konsistenz zu überprüfen, führen Sie den Befehl Eseutil für die Datenbank-und Protokolldateien aus, die in der folgenden Tabelle angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="4e73d-114">To check the snapshot consistency, run the eseutil command against the database and log files that are identified in the following table.</span></span> 
  
<span data-ttu-id="4e73d-115">**Tabelle 1. Befehle des Typs "Eseutil. exe" für jeden Sicherungstyp**</span><span class="sxs-lookup"><span data-stu-id="4e73d-115">**Table 1. Eseutil.exe commands for each backup type**</span></span>

|<span data-ttu-id="4e73d-116">**Dateityp/Sicherungstyp**</span><span class="sxs-lookup"><span data-stu-id="4e73d-116">**File type/backup type**</span></span>|<span data-ttu-id="4e73d-117">**Vollständige Sicherung**</span><span class="sxs-lookup"><span data-stu-id="4e73d-117">**Full backup**</span></span>|<span data-ttu-id="4e73d-118">**Sicherung kopieren**</span><span class="sxs-lookup"><span data-stu-id="4e73d-118">**Copy backup**</span></span>|<span data-ttu-id="4e73d-119">**Inkrementelle Sicherung**</span><span class="sxs-lookup"><span data-stu-id="4e73d-119">**Incremental backup**</span></span>|<span data-ttu-id="4e73d-120">**Differenzielle Sicherung**</span><span class="sxs-lookup"><span data-stu-id="4e73d-120">**Differential backup**</span></span>|
|:-----|:-----|:-----|:-----|:-----|
|<span data-ttu-id="4e73d-121">EDB</span><span class="sxs-lookup"><span data-stu-id="4e73d-121">.edb</span></span>  <br/> |<span data-ttu-id="4e73d-122">"Eseutil k/i"</span><span class="sxs-lookup"><span data-stu-id="4e73d-122">"eseutil /k /i"</span></span>  <br/> |<span data-ttu-id="4e73d-123">"Eseutil k/i"</span><span class="sxs-lookup"><span data-stu-id="4e73d-123">"eseutil /k /i"</span></span>  <br/> |<span data-ttu-id="4e73d-124">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="4e73d-124">Not applicable</span></span>  <br/> |<span data-ttu-id="4e73d-125">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="4e73d-125">Not applicable</span></span>  <br/> |
|<span data-ttu-id="4e73d-126">. log</span><span class="sxs-lookup"><span data-stu-id="4e73d-126">.log</span></span>  <br/> |<span data-ttu-id="4e73d-127">"Eseutil k" (1)</span><span class="sxs-lookup"><span data-stu-id="4e73d-127">"eseutil /k" (1)</span></span>  <br/> |<span data-ttu-id="4e73d-128">"Eseutil k" (1)</span><span class="sxs-lookup"><span data-stu-id="4e73d-128">"eseutil /k" (1)</span></span>  <br/> |<span data-ttu-id="4e73d-129">"Eseutil k" (2)</span><span class="sxs-lookup"><span data-stu-id="4e73d-129">"eseutil /k" (2)</span></span>  <br/> |<span data-ttu-id="4e73d-130">"Eseutil k" (2)</span><span class="sxs-lookup"><span data-stu-id="4e73d-130">"eseutil /k" (2)</span></span>  <br/> |
   
> [!NOTE]
> <span data-ttu-id="4e73d-131">Sie müssen den Befehl Eseutil nicht für STM-und CHK-Dateien ausführen.</span><span class="sxs-lookup"><span data-stu-id="4e73d-131">You do not need to run the eseutil command against .stm and .chk files.</span></span> 
  
<span data-ttu-id="4e73d-132">Alle Protokolldateien mit einer Generierungsnummer der Protokolldatei, die größer oder gleich der Generierungsnummer der Prüfpunktprotokoll Datei ist, sind erforderlich, um eine Momentaufnahmedatenbank wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="4e73d-132">All the log files that have a log file generation number that is equal to or greater than the generation number of the checkpoint log file are required in order to recover a snapshot database.</span></span> <span data-ttu-id="4e73d-133">Wenn diese vorhanden ist, ist die aktuelle Protokolldatei (enn. log) auch für die Datenbankwiederherstellung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4e73d-133">If it exists, the current log file (Enn.log) is also required for database recovery.</span></span> <span data-ttu-id="4e73d-134">Wenn bei einer der erforderlichen Protokolldateien die Konsistenzprüfung fehlschlägt, muss der Anforderer sicherstellen, dass der Status der Sicherungskomponente auf false festgelegt ist, bevor die [BackupComplete](https://msdn.microsoft.com/library/windows/desktop/aa382651%28v=vs.85%29.aspx) -Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="4e73d-134">If any of the required log files fail the consistency check, the requester must make sure that the status of the backup component is set to FALSE before it calls the [BackupComplete](https://msdn.microsoft.com/library/windows/desktop/aa382651%28v=vs.85%29.aspx) method.</span></span> <span data-ttu-id="4e73d-135">Führen Sie zum Identifizieren der Prüfpunktprotokoll Datei Eseutil. exe für die Snapshot-Prüfpunktdatei aus, und analysieren Sie die Ausgabe für "Prüfpunkt:".</span><span class="sxs-lookup"><span data-stu-id="4e73d-135">To identify the checkpoint log file, run Eseutil.exe against the snapshot checkpoint file and parse the output for "Checkpoint:."</span></span> <span data-ttu-id="4e73d-136">Im folgenden Beispiel wird gezeigt, wie Eseutil. exe für eine Prüfpunktdatei ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4e73d-136">The following example shows how to run Eseutil.exe against a checkpoint file.</span></span> 
  
```cpp
c:\eseutil.exe /mk E01.chk
Checkpoint: (0x20, 9D, 187)
```

<span data-ttu-id="4e73d-137">Die zweite Codezeile im Beispiel ist der Rückgabewert, wobei 0x20 die hexadezimale Protokollgenerierungsnummer der Prüfpunktprotokoll Datei ist.</span><span class="sxs-lookup"><span data-stu-id="4e73d-137">The second line in the example is the return value, where 0x20 is the hexadecimal log generation number of the checkpoint log file.</span></span> <span data-ttu-id="4e73d-138">In diesem Beispiel dürfen Protokolldateien, einschließlich E01000020. log und höher, nicht beschädigt werden, um die Snapshotdatenbank wiederherzustellen, selbst wenn die Datenbank selbst die physikalische Konsistenzprüfung bereits bestanden hat.</span><span class="sxs-lookup"><span data-stu-id="4e73d-138">In this example, any log files, including E01000020.log and greater, must not be corrupt in order to recover the snapshot database, even if the database itself has already passed the physical consistency check.</span></span>
  
<span data-ttu-id="4e73d-139">Für die Datenbankwiederherstellung sind alle Protokolldateien in einem inkrementellen oder differenziellen Sicherungssatzes erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4e73d-139">All log files in an incremental or differential backup set are required for database recovery.</span></span> <span data-ttu-id="4e73d-140">Sie können die Konsistenz einer Protokollsequenz überprüfen, indem Sie "Eseutil. exe" für das Präfix der Protokolldatei verwenden.</span><span class="sxs-lookup"><span data-stu-id="4e73d-140">You can check the consistency of a log sequence by running Eseutil.exe against the log file prefix.</span></span> <span data-ttu-id="4e73d-141">Im folgenden Beispiel wird gezeigt, wie Konsistenzprüfungen für alle Dateien des Formulars E01xxxxx. log für einen bestimmten Pfad ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4e73d-141">The following example shows how to run consistency checks against all the files of the form E01xxxxx.log on a given path.</span></span>
  
```cpp
c:\eseutil /k E01
```

## <a name="checking-the-eseutilexe-output"></a><span data-ttu-id="4e73d-142">Überprüfen der Ausgabe von "Eseutil. exe"</span><span class="sxs-lookup"><span data-stu-id="4e73d-142">Checking the Eseutil.exe output</span></span>

<span data-ttu-id="4e73d-143">Der Anforderer muss überprüfen, ob alle zurückgegebenen Exit ERRORLEVEL-Fehlerwerte nicht negativ sind.</span><span class="sxs-lookup"><span data-stu-id="4e73d-143">The requester must verify that all the exit ERRORLEVEL error values that are returned are nonnegative.</span></span> <span data-ttu-id="4e73d-144">Informationen zu ERRORLEVEL-Werten finden Sie unter [Reference für häufige Eseutil-Fehler](https://technet.microsoft.com/library/aa996759%28v=exchg.80%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="4e73d-144">For information about ERRORLEVEL values, see [Reference for Common Eseutil Errors](https://technet.microsoft.com/library/aa996759%28v=exchg.80%29.aspx).</span></span> <span data-ttu-id="4e73d-145">Um den ERRORLEVEL an der Befehlszeile anzuzeigen, geben Sie "Echo% ERRORLEVEL%" ein, nachdem die Ausführung von "Eseutil. exe" abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="4e73d-145">To see the ERRORLEVEL at the command line, type "echo %errorlevel%" after Eseutil.exe finishes running.</span></span> <span data-ttu-id="4e73d-146">Ein negativer ERRORLEVEL gibt an, dass eine oder mehrere Dateien beschädigt sind.</span><span class="sxs-lookup"><span data-stu-id="4e73d-146">A negative ERRORLEVEL indicates that one or more files is corrupted.</span></span>
  
<span data-ttu-id="4e73d-147">Bevor der Anforderer die **BackupComplete** -Methode aufruft, muss er sicherstellen, dass der Status der Sicherungskomponente das Ergebnis der Konsistenzprüfung widerspiegelt.</span><span class="sxs-lookup"><span data-stu-id="4e73d-147">Before the requester calls the **BackupComplete** method, it must make sure that the status of the backup component reflects the result of the consistency check.</span></span> <span data-ttu-id="4e73d-148">Wenn eine Beschädigung gefunden wurde, ist der Status false; Wenn keine Beschädigung gefunden wurde, wird der Status auf true festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4e73d-148">If any corruption was found, the status will be FALSE; if no corruption was found, the status will be TRUE.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="4e73d-149">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="4e73d-149">See also</span></span>

- [<span data-ttu-id="4e73d-150">Überprüfen der Integrität der Sicherung mithilfe der CHKSGFILES-API in Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="4e73d-150">Validate backup integrity by using the CHKSGFILES API in Exchange 2013</span></span>](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)
- [<span data-ttu-id="4e73d-151">Erstellen von Sicherungs-und Wiederherstellungsanwendungen für Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="4e73d-151">Build backup and restore applications for Exchange 2013</span></span>](build-backup-and-restore-applications-for-exchange-2013.md)
- [<span data-ttu-id="4e73d-152">CChkSGFiles-Klassenreferenz</span><span class="sxs-lookup"><span data-stu-id="4e73d-152">CChkSGFiles class reference</span></span>](cchksgfiles-class-reference.md)
- [<span data-ttu-id="4e73d-153">Sichern und Wiederherstellen von Konzepten für Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="4e73d-153">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    

